<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Profile</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
   <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" 
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" 
    crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <script src="script.js"></script>

</head>
<body>

    {{!-----------------------------------------------------------------Navbar---------------------------------------------------------------------------- --}}
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark ">
        <a class="navbarBrand col-md-3 text-center">Inventory Manager</a>
        
        <div class="collapse navbar-collapse justify-content-end" id="navContent">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link text-center" id="statsNav" href="#">Statistics</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-center" id="invNav" href="#">Inventory</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-center" id="usersNav" href="#">Users</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-center" id="transNav" href="#">Transactions</a>
                </li>
                 <li class="nav-item">
                    <a class="nav-link text-center" id="prodNav" href="#">Product Requests</a>
                </li>
                 <li class="nav-item">
                    <a class="nav-link text-center" id="reqNav" href="#">Request Log</a>
                </li>
                <li class="nav-item text-center">
                    <a class="nav-link" href="/admin/logout">Logout</a>
                </li>
            
            </ul>
        </div>
    </nav>


    
    {{!--------------------------------------------------------------------------------Statistics--------------------------------------------------------------------------------- --}}
            
    
    <div id="adminCard">
        <h2 class="text-white text-center">Statistics</h2>
        <div class="row">
            <div class="col-3 s4 m3 ">
                <div class="card hoverable stats">
                    <div class="cardImage">
                        <img src="../../Images/inventory.jpg">
                    </div>
                    <div class="card-content ">
                        <span class="h4 font-weight-bold">Total Products : {{products.length}} </span>
                        <a><i class=" btn-floating material-icons red right">chevron_right</i></a>
                        <br><br>
                        <p>These number of products are available in your Inventory</p>
                    </div>
                </div>
            </div>
        

    
            <div class="col-3 s3 m3 ">
                <div class="card hoverable stats">
                    <div class="cardImage">
                        <img   src="../../Images/users.jpg">
                    </div>
                    <div class="card-content ">
                        <span class="h4 font-weight-bold">Total Users : {{users.length}}  </span>
                        <a><i class="btn-floating material-icons right red">chevron_right</i></a>
                        <br><br>
                        <p>These number of users have registered on your website</p>
                    </div>
                </div>
            </div>
            <div class="col-3 s5 m3 ">
                <div class="card hoverable stats ">
                    <div class="cardImage">
                        <img   src="../../Images/transaction2.jpg">
                    </div>
                    <div class="card-content ">
                        <span class="h4 font-weight-bold">Transactions : {{transactions.length}}  </span>
                        <a ><i class="btn-floating material-icons right red">chevron_right</i></a>
                        <br><br>
                        <p>Total number of successful transactions from your inventory</p>
                    </div>
                </div>
            </div>
            <div class="col-3 s5 m3 ">
                <div class="card hoverable stats">
                    <div class="cardImage">
                        <img   src="../../Images/profit.jpg">
                    </div>
                    <div class="card-content ">
                        <span class="h4 font-weight-bold">Total Profit : </span>
                        <a ><i class="btn-floating material-icons red right">chevron_right</i></a>
                        <br><br>
                        <p>Total Profit Earned from sale of all items</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {{!-- ----------------------------------------------------------------Inventory----------------------------------------------------------------- --}}
    
    {{!-- <h1>Transactions Count : {{transactions.length}}</h1> --}}
    {{!-- <form action="/product/add" method="GET">
        <input type="submit" value="Add Product">
    </form><br>
     --}}

    <div id="inventory">
        <h2 class="text-center text-white">Inventory</h2>
        {{#each products as |item|}}

            <div class="card col-3 hoverable inventoryCard z-depth-1">
                <div class="card-image waves-effect waves-block waves-light inventoryImage">
                    <img class="activator" src="../../admin/productImages/{{item.id}}.jpg">
                </div>
                <div class="card-content cardFront">
                    <span class="font-weight-bolder card-title activator titleCard text-center ">{{item.name}}<i class="btn btn-floating waves-effect waves-light cyan  accent-4 material-icons right inventoryIcon">arrow_upward</i></span>
                    <span class="font-weight-bold card-title activator desc1 text-center">CP: Rs {{item.costprice}}</span>
                    <span class="font-weight-bold card-title activator desc2 text-center">SP: Rs {{item.sellingprice}}</span>


                </div>
                
                <div class="card-reveal">
                    <div class="card-title  font-weight-bold text-light">{{item.name}}<i class="btn btn-floating waves-effect waves-light light-blue material-icons right inventoryIcon">arrow_downward</i></div>
                    <div class="formBtn ">
                        <form action="/product/delete" method="POST">
                            <input type="text" name="id" value="{{item.id}}" hidden>
                            <input type="submit" class="pink accent-3 " value="Delete Product">
                        </form>
                        <form action="/product/update" method="POST">
                            <input type="text" name="id" value="{{item.id}}" hidden>
                            <input type="submit" class="green" value="Update Details">
                        </form>
                    </div>
                                    
                    <table class="table text-light">
                        <tr>
                            <th class="text-center">Product Id</th>
                            <td class="text-center">{{item.id}}</td>
                        </tr>
                        <tr>
                            <th class="text-center">Company Name</th>
                            <td class="text-center">{{item.companyname}}</td>
                        </tr>
                        <tr>
                            <th class="text-center">Cost Price</th>
                            <td class="text-center">{{item.costprice}}</td>
                        </tr>
                        <tr>
                            <th class="text-center">Selling Price</th>
                            <td class="text-center">{{item.sellingprice}}</td>
                        </tr>
                        <tr>
                            <th class="text-center">Quantity</th>
                            <td class="text-center">{{item.quantity}}</td>
                        </tr>
                        
                        <tr>
                            <th class="text-center">Description</th>
                            <td class="text-center">{{item.description}}</td>
                        </tr>
                        <tr>
                            <th class="text-center">Entry Time</th>
                            <td class="text-center">{{item.time}}</td>
                        </tr>
                    </table>
                    
                </div>
            </div>
        {{/each}}

    </div>

    {{!-- -------------------------------------------------------------User Table-------------------------------------------------------------}}
    <div id="usersAdmin">
        <h2 class="text-center text-white">Registered Users</h2>
        <table class="table text-light" id="userTable" >
            <thead id="userHeader" class="bg-dark">
                <th class="userHead text-center">Username</th>
                <th class="userHead text-center">Email</th>
            </thead>
            <tbody >
                {{#each users as |item|}}
                    <tr>
                        <td class="username text-center">{{item.username}}</td>
                        <td class="email text-center">{{item.email}}</td>
                        
                    </tr>
                {{/each}}
                   
            </tbody>
        </table>
    </div>


    {{!---------------------------------------------------------------------Transaction Table----------------------------------------------------------}}
    <div id="transaction">
        <h2 class="text-center text-white ">Transaction History</h2>
        <table class="table text-center" id="transactionTable" >
            <thead class="thead-dark">
                <th>Transaction ID</th>
                <th>Product ID</th>
                <th>Product Name</th>
                <th>Price</th>
                <th>Quantity Ordered</th>
                <th>Bill Amount</th>
                <th>Time Of Order</th>
                <th>Username</th>
                <th>Name</th>
                <th>Phone No.</th>
                <th>Address</th>
            </thead>
            {{#each transactions as |item|}}
                <tr>
                    <td>{{item.id}}</td>
                    <td>{{item.productid}}</td>
                    <td>{{item.productname}}</td>
                    <td>{{item.price}}</td>
                    <td>{{item.quantityordered}}</td>
                    <td>{{item.billamount}}</td>
                    <td>{{item.time}}</td>
                    <td>{{item.username}}</td>
                    <td>{{item.name}}</td>
                    <td>{{item.phoneno}}</td>
                    <td>{{item.address}}</td>
                </tr>
            {{/each}}
        </table>
    </div>

    {{!------------------------------------------------------------------------Product Requests-------------------------------------------------------------------}}
    <div id="productRequest">
        <h1>Product Requests</h1>
        <table border=2 cellspacing="5" cellpadding="5">
            <thead>
                <th>Product ID</th>
                <th>Product Image</th>
                <th>Product Name</th>
                <th>Company Name</th>
                <th>Cost Price</th>
                <th>Quantity</th>
                <th>Description</th>
                <th>Time Of Request</th>
                <th>User who Requested</th>
                <th>User's Mail</th>
                <th>Add to Inventory</th>
                <th>Delete Request</th>
            </thead>
            {{#each tempproducts as |item|}}
                <tr>
                    <td>{{item.id}}</td>
                    <td><img src='../../consumer/productimagestemp/{{item.id}}.jpg' width='200'></td>
                    <td>{{item.name}}</td>
                    <td>{{item.companyname}}</td>
                    <td>{{item.costprice}}</td>
                    <td>{{item.quantity}}</td>
                    <td>{{item.description}}</td>
                    <td>{{item.time}}</td>
                    <td>{{item.user}}</td>
                    <td>{{item.usermail}}</td>
                    <td>
                        <form action="/admin/addtoinventory" method="POST">
                            <input type="text" name="sellingprice" placeholder="Enter Selling Price" required>
                            <input type="text" name="id" value="{{item.id}}" hidden>
                            <input type="submit" value="Add to Inventory">
                        </form>
                    </td>
                    <td>
                        <form action="/admin/deleterequest" method="POST">
                            <input type="text" name="id" value="{{item.id}}" hidden>
                            <input type="submit" value="Delete Request">
                        </form>
                    </td>
                </tr>
            {{/each}}
        </table>
    </div>
    {{!----------------------------------------------------------------------Request Log----------------------------------------------------------------}}
    <div id="requestLog">
        <h1>Product Request Log</h1>
        <table border=2 cellspacing="5" cellpadding="5">
            <thead>
                <th>Product ID</th>
                <th>Product Name</th>
                <th>Product Image</th>
                <th>Company Name</th>
                <th>Cost Price</th>
                <th>Quantity</th>
                <th>Description</th>
                <th>Time Of Request</th>
                <th>User who Requested</th>
                <th>User's Mail</th>
                <th>Status</th>
            </thead>
            {{#each requestlog as |item|}}
                <tr>
                    <td>{{item.id}}</td>
                    <td><img src='../../consumer/productimagestemp/{{item.id}}.jpg' width='200'></td>
                    <td>{{item.name}}</td>
                    <td>{{item.companyname}}</td>
                    <td>{{item.costprice}}</td>
                    <td>{{item.quantity}}</td>
                    <td>{{item.description}}</td>
                    <td>{{item.time}}</td>
                    <td>{{item.user}}</td>
                    <td>{{item.usermail}}</td>
                    <td>{{item.status}}</td>
                </tr>
            {{/each}}
        </table>
    </div>
</body>
    <link rel="stylesheet" href="style.css">
    {{!-- <link rel="stylesheet" href="../../nav.css"> --}}
</html>